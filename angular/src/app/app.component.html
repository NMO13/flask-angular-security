<header class="position-absolute w-100">
  <app-header></app-header>
</header>
<main class="container h-100">

  <div class="row h-100">
    <div class="wrapper my-auto col-6 offset-3">
      <div class="form-wrapper border pl-5 pr-5 pt-4 pb-4 rounded">
        <form
          [formGroup]="signupForm"
          (ngSubmit)="onSubmit()"
        >
          <div class="form-group">
            <label for="user">Benutzername *</label>
            <input
              type="text"
              id="user"
              class="form-control"
              name="user"
              formControlName="user"
              [ngClass]="{ 'is-invalid': requestSent && f.user.errors }"
            >
            <div
              *ngIf="requestSent && f.user.errors"
              class="invalid-feedback">
              <span
                class="help-block"
                *ngIf="f.user.errors.required">Bitte einen gültigen Benutzername angeben.</span>
            </div>
          </div>
          <div class="form-group">
            <label for="password_1">Passwort *</label>
            <input
              type="password"
              id="password_1"
              class="form-control"
              name="password_1"
              formControlName="password_1"
              [ngClass]="{ 'is-invalid': requestSent && f.password_1.errors }"
            >
            <div
              *ngIf="requestSent && f.password_1.errors"
              class="invalid-feedback">
              <span
                class="help-block"
                *ngIf="f.password_1.errors.required">Bitte ein gültige Passwort angeben.</span>
              <span
                class="help-block"
                *ngIf="f.password_1.errors.minlength">Das Passwort ist zu kurz.</span>
            </div>
          </div>

          <div *ngIf="!isLoginMode">
            <div class="form-group">
              <label for="password_2">Passwort Wiederholung *</label>
              <input
                type="password"
                id="password_2"
                class="form-control"
                name="password_2"
                formControlName="password_2"
                [ngClass]="{ 'is-invalid': requestSent && f.password_2.errors }"
              >
              <div
                *ngIf="requestSent && f.password_2.errors"
                class="invalid-feedback">
                <span
                  class="help-block"
                  *ngIf="f.password_2.errors.required">Bitte ein gültiges Passwort angeben.</span>
                <span
                  class="help-block"
                  *ngIf="f.password_2.errors.mustMatch">Die Passwörter stimmen nicht überein.</span>
              </div>
            </div>
            <div class="form-group">
              <label for="email_address1">E-Mail *</label>
              <input
                type="text"
                id="email_address1"
                class="form-control"
                name="email_address1"
                [ngClass]="{ 'is-invalid': requestSent && f.email_address1.errors }"
                formControlName="email_address1"
              >
              <div
                *ngIf="requestSent && f.email_address1.errors"
                class="invalid-feedback">
                <span
                  class="help-block"
                  *ngIf="f.email_address1.errors.required ||
                  f.email_address1.errors.email">Bitte eine gültige Email Adresse angeben.</span>
              </div>
            </div>
            <div class="form-group">
              <label for="email_address2">E-Mail Wiederholung</label>
              <input
                type="text"
                id="email_address2"
                class="form-control"
                name="email_address2"
                [ngClass]="{ 'is-invalid': requestSent && f.email_address2.errors }"
                formControlName="email_address2"
              >
              <div
                *ngIf="requestSent && f.email_address2.errors"
                class="invalid-feedback">
                <span
                  class="help-block"
                  *ngIf="f.email_address2.errors.required ||
                  f.email_address2.errors.email">Bitte eine gültige Email Adresse angeben.</span>
                <span
                  class="help-block"
                  *ngIf="f.email_address2.errors.mustMatch">Die E-Mail Adressen stimmen nicht überein.</span>
              </div>
            </div>
          </div>

          <div class="d-flex align-items-center mt-4">
            <button
              class="btn btn-primary"
            >{{ isLoginMode ? 'Einloggen' : 'Registrieren' }}</button>
            <div
              *ngIf="!isLoginMode"
              class="ml-3">
              <a
                routerLink="/"
                (click)="toggleAuth()">Zurück zum Login</a>
            </div>
          </div>
        </form>
      </div>

      <div
        class="mt-4"
        *ngIf="requestSent">
        <div
          class="alert alert-danger"
          *ngIf="errorMsg !== null">
          <p>{{ errorMsg }}</p>
        </div>
        <div
          class="alert alert-success"
          *ngIf="errorMsg === ''">
          <p *ngIf="isLoginMode">Login erfolgreich</p>
          <p *ngIf="!isLoginMode">Benutzerkonto erstellt. Überprüfe dein E-Mail Postfach!</p>
        </div>
      </div>

      <div *ngIf="isLoginMode">
        <div class="border  pl-5 pr-5 pt-4 pb-4 rounded mt-4">
          <span>Noch kein Konto? <a
            routerLink="/registration"
            (click)="toggleAuth()">Erstelle eines.</a></span>
        </div>
      </div>

    </div>
  </div>
</main>
